ひらめきのきらめきの歴史とは、まあ要するに私のウェブサイト制作の足跡である。
こんなものを見ようだなんて、あなたも酔狂な人だ。ありがたい限りだ。

## サークルクロス（前身）
サークルクロスというウェブサイトを作り、自作したゲームを公開したりしていた。
そのころは検索エンジンもあまり頭がよくなかったので、Javascript等でページを書き換えた場合、書き換え後のページを検索エンジンが認識できないという問題があった。
そのため、目次やメニューを別ファイルで持ち、表示後に書き換えるという方法は使えなかった。
PHPを使えばサーバ側でページを生成してから表示するため検索エンジンにも適切に認識してもらえたのだが、有料のレンタルサーバでなければ使えなかったので、諸々の事情があって当時の私には使えなかった。
そんなこともあってブログサービスを併用していたが、ブログは私の性にはあまりあっていなかったので更新は途絶えがちだった。今でもそうだが。

## ひらめきのきらめき（初代）
そこからしばらくたって、PHPを用いたブログシステム、ワードプレスが世の中を席巻していた。
私がワードプレスに手を付けたのは一通り世の中を席巻した後だったので、割と出遅れていた方だろう。
旧来のブログサービスとは比較にならないほどの拡張性を持つワードプレスは私の要望にまあほぼ適うもので、とりあえずワードプレスを使ったブログ的なものを作っていた。
しかし、帯に短したすきに長しというか、できることは多いが必要ない機能も多くそれでいて私のやりたいことができないという、何というかスマートではなかったので捨てるに至った。
正直、記事間の連携がほぼ手動というのがかなり痛い。
そんなのいらないという人が大半だろうが、私はそうはいかなかったのである。

## 俺ペディア（二代目ひらめきのきらめき）
で、作ったのがこのひらめきのきらめき……の前のひらめきのきらめきで、とりあえず俺ペディアと名付けておいた。
コンセプトは今のひらめきのきらめきと同じである。
ワードプレスの中で記事同士をある程度自動で連携させるのはほぼ不可能であるとわかった。
連携というのは、ある記事の中に別の記事の内容を表示させる、ということだ。
もちろん別の記事へリンクすることはできるが、いちいちページ遷移させるのは読者にとっては非常に面倒くさいことだ。
ではどうするか。ローカルで連携したHTMLを生成すればよいではないか、という発想に至った。まあ割と脳筋な結論である。
とはいえ、必要なHTMLをあらかじめ生成してアップロードしておけば、いちいちサーバ側でプログラムを走らせる必要もないし、どんなページを作りたいかはこちらで全て制御できるので、脳筋だが合理的な発想であると今でも思っている。
で、記事の内容は全て一つのXMLにまとめ、それをXSLTでHTMLに変換したものを全てまとめてアップロードしていたわけだ。
ファイル総数およそ500。人力で全部作ると思うと卒倒しそうだが、ある程度記事間の連携が取れているので意外と大した量ではなかったりする。
デザインセンスの問題はありつつも目指すところはそれなりに達成できてはいた、と思う。
ではなんでこれもやめてしまったのかというと、更新の面倒くささである。
記事の内容の全てを一つのXMLにまとめたと言ったが、これが面倒くさい。
何しろ総計500記事相当の情報が一つのファイルにまとまっているのだから、いかにファイル内検索ができるとは言っても記事の管理がめっちゃ大変である。
「この記事の直下に記事を追加しよう」と思っても、その記事にたどり着くのが一苦労だった。
そんなわけで、きつくなってまた更新をやめたわけだ。

## ひらめきのきらめき――超絶大爆神速俺ペディア――（三代目）
で、ようやく現ひらめきのきらめきの登場だ。
初代ひらめきのきらめきでできなかった記事間の連携が二代目ではできるようになったが、更新がめっちゃきつくなってしまった。
まあ、連携させるという観点ではワードプレスも相当面倒くさかったのでどっちもどっちだが。
というわけで（どういうわけか）たどり着いたのがシングルページアプリケーションの技術である。
めっちゃ長いカタカナの名前だが、発想的にはサークルクロスの時代に考えていた、目次やメニューを固定してコンテンツを書き換える、という技術に他ならない。
ある意味で原点回帰したと言ってもいい。
当時は検索エンジンの関係で使えなかったJavascriptによるページ書き換えだが、検索エンジンが賢くなった結果使えるようになったというわけである。
更新がめっちゃ大変だったので、反転して更新がめっちゃ楽になる仕組みにしようと思い立ってたどり着いた境地だ。
どういうことかというと、コンテンツは全てテキストファイルにして、エクスプローラからファイルを開いてテキストエディタで更新できるようにしようと思ったわけだ。
実はこれに至るのは、VSCodeとの出会いがきっかけだった。
Visual Studio自体は以前から使用していたが、実はVSCodeはほとんど触っておらず、普段使いのテキストエディタはもっぱらEmEditorだった。
EmEditorももちろん便利なのだが、画面の端にエクスプローラのカラムが表示できることが私がVSCodeへ乗り換える最大のポイントになった。
今まではWindowsのエクスプローラからテキストを開き、エディタに移動するという手順だったが、これがテキストエディタ一つで可能になったのは大きな転換点だったと言っていい。
まあ、他のテキストエディタでもできたかもしれないが。
そんなわけで、テキストファイルによるコンテンツ管理が劇的に便利になったことで、シングルページアプリケーションによる実装が現実のものになったのだった。
シングルページアプリケーションについてはChatGPTの助けもあって比較的簡単に実装することができた。デザインセンスは相変わらずだが。
とはいえ、単なるシングルページアプリケーションでは芸がない。
二代目では、一応サイト内別コンテンツへのリンクが比較的容易に張れるような仕掛けを作っていたのだが、正直一つ一つ手作業でリンクを張るのもそれなりに量が多くなってくると億劫である。少なくても億劫だが。
そうなると、文章の中身から自動で別記事へのリンクを張れるようにしておいた方がよいだろうとなる。ニコニコ大百科のようなものだと思ってもらえばいいだろう。
これを実装する上で最初に思い付いたのは形態素解析エンジンによる形態素解析である。
単語に分解してそれをリンクにし、該当するページがあればそこに遷移、なければ404的なページに飛ばすというものだ。
結論から言うとこれは頓挫した。というか、ほぼ意味がなかった。
本分の全てがリンクになる、のはまあ良いのだが、ChatGPTとやり取りをしていくうちに、遥かに効率の良い方法があるとわかったので不要になった。
遥かに効率の良い方法とは、正規表現による置換である。まあ、誰でも思いつくが。
遷移する可能性のあるファイルはファイル名のリストから容易に取得が可能である。そしてその数は有限である。
であれば、各ファイルの内容にファイル名のリストが含まれているかどうかをあらかじめ調べておけば、その含まれている譚とリストを用いて正規表現によりリンク化するのは全く容易であった。
一度の置換で全てをリンクにできるので、今のところほぼ瞬殺でページの変換ができている。まったく我ながら大したものである。
さて、これでほぼ当初の私の目的は果たされたのだが、果たされればまたアイディアが浮かんでくるというもの。
コンテンツが多くなった時もこの速度が維持できるのだろうか。
往々にしてコンテンツの量が多くなれば表示するための速度は遅くなっていくのが通例である。
まあ、多少遅くなるのは仕方がない。では、対策をすることはできないだろうか。
いや、できる。
実に簡単な話だが、先に遷移する可能性のあるファイルはリストアップが完了している。
つまり、あなたが次に表示する可能性のあるページの情報は既に私が握っているわけだ。
そして、いくらあなたが速読が得意であっても、1秒もかからずにページを読み切るのはほとんど不可能に近い。
そこで、あなたがページを詠んでいる間に、次に読むかもしれないページを読み込んでおけばよい。
結局、ページの読み込みに数秒かかるようになっても、あなたが記事を読み終わるまでにページの読み込みが完了してさえいれば、次のページへの遷移にかかる時間は0になる。
これは、ワードプレスでは当然実現不可能であるし、実は静的なHTMLで構成されたサイトでも実現不可能である。
2ページ目以降の表示に関して言えば、阿部寛のホームページよりも速いと言っていい。
そんなわけで、単なるシングルページアプリケーションにとどまらず、先行読み込みをすることでページ遷移にかかる時間をほぼ0にした超絶大爆神速俺ペディアとしてのひらめきのきらめきが完成したのであった。